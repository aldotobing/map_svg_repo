<svg id="mapPin" width="64" height="64" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" xml:space="preserve" fill="#000000">
  <defs>
    <radialGradient id="grad1" cx="32" cy="32" r="28" fx="32" fy="32">
      <stop offset="0%" style="stop-color:#ff6666" />
      <stop offset="100%" style="stop-color:#ff0000" />
    </radialGradient>
  </defs>

  <!-- Modified pin shape to match the provided SVG -->
  <path id="pinPath" d="M32,2C16.5,2,4,14.5,4,30c0,13.8,20.1,30.7,23.8,32.8c0.4,0.3,0.9,0.3,1.3,0c3.7-2.1,23.8-19,23.8-32.8 C60,14.5,47.5,2,32,2z" fill="url(#grad1)" stroke="#000000" stroke-width="1" />

  <!-- Dynamic number -->
  <text id="number" x="50%" y="45%" text-anchor="middle" dominant-baseline="central" font-family="'Roboto', Arial" font-size="16" fill="#000000">123</text>

  <!-- JavaScript for dynamic adjustments -->
  <script>
    const svgElement = document.getElementById('mapPin');
    const pinPathElement = document.getElementById('pinPath');
    const numberElement = document.getElementById('number');

    // Adjustment on text change
    numberElement.addEventListener('DOMCharacterDataModified', () => {
      adjustNumberPosition(numberElement.textContent);
    });

    // Function to adjust the number position based on its width
    function adjustNumberPosition(text) {
      const textWidth = numberElement.getComputedTextLength();
      const radius = textWidth / 2 + 8; // Add 8 to account for some padding
      numberElement.setAttribute('x', `${32 - radius + 4}`);
    }

    // Initial adjustment
    adjustNumberPosition(numberElement.textContent);

    // Color change function
    function changeColor(color) {
      pinPathElement.setAttribute('fill', `url(#grad1)`);
      const stops = svgElement.querySelectorAll('radialGradient stop');
      stops[0].setAttribute('style', `stop-color:${color}`);
      stops[1].setAttribute('style', `stop-color:${darker(color, 20)}`);
    }

    // Helper function to darken a color
    function darker(color, percent) {
      const r = parseInt(color.substr(1, 2), 16);
      const g = parseInt(color.substr(3, 2), 16);
      const b = parseInt(color.substr(5, 2), 16);

      const newR = Math.round(r * (100 - percent) / 100);
      const newG = Math.round(g * (100 - percent) / 100);
      const newB = Math.round(b * (100 - percent) / 100);

      const newColor = `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;
      return newColor;
    }
  </script>
</svg>
